# Руководство использованию по API
В данном руководстве приведены минимально рабочие примеры.

Принятые определения:  
Схема (scheme) - документ, созданный администратором и содержащий информацию об опросе.  
Опрос (survey) - документ, просматриваемый и заполняемый участником опроса.  

## Функционал администратора
### Аутентификация в системе

### Получение списка схем
**GET /api/v1/schemes/**
  
### Создание схемы
**POST /api/v1/schemes/**
```
{
    "name": "Первый опрос",
    "date_from": "2020-12-01",
    "date_to": "2020-12-15"
}
```
Необязательные поля: description, questions.
    
### Получение полной информации о схеме
**GET /api/v1/schemes/<uuid:id схемы>**
  
### Изменение схемы
**PATCH /api/v1/schemes/<uuid:id схемы>**
```
{
    "description": "Описание первого опроса"
}
```
    
### Удаление схемы
**DELETE /api/v1/schemes/<uuid:id схемы>**
    
### Добавление вопроса в схему
**PATCH /api/v1/schemes/<uuid:id схемы>**
```
{
    "questions": [
        {
            "text": "Первый вопрос",
            "answer_type": "TEXT"
        }
    ]
}
```
Новый вопрос будет создан, если не указан его "id".  
Варианты "answer_type": TEXT, SINGLE, MULTIPLE.  
При указании SINGLE и MULTIPLE необходимо передать в дополнительном поле "answer_options" список возможных ответов.  
      
### Изменение вопроса
**PATCH /api/v1/schemes/<uuid:id схемы>**
```
{
    "questions": [
        {
            "id": "uuid вопроса"
            "answer_type": "SINGLE",
            "answer_options": [
                "Первый вариант ответа",
                "Второй вариант ответа",
            ],
        }
    ]
}
```
Передать "id" вопроса и изменяемые поля.
    
### Удаление вопроса
**PATCH /api/v1/schemes/<uuid:id схемы>**
```
{
    "questions": [
        {
            "id": "uuid вопроса"
        }
}
```
Будут удалены все вопросы, у которых передан только "id".    

### Получение списка участников опросов
**GET /api/v1/participants/**

### Получение информации об участнике и пройденных им опросах
**GET /api/v1/participants/<int:id участника>**
    
  
## Функционал участника опроса
### Получение списка активных опросов
**GET /api/v1/surveys/**

### Прохождение опроса анонимно
**GET /api/v1/scheme/<uuid:id схемы>/take**  
URL для прохождения опросов получают из списка опросов.

### Прохождение опроса участником, уже проходившим опросы
**GET /api/v1/scheme/<uuid:id схемы>/take?participant_id=<int:id участника>**  
"participant_id" получают из первого опроса, пройденного анонимно.
  
### Отправка ответов
**PATCH /api/v1/surveys/<uuid:id опроса>**
```
    "answers": [
        {
            "id": "uuid ответа"
            "answer": [
                "Первый вариант ответа",
                "Второй вариант ответа",
            ],
        }
    ]
```  
Приведён пример для answer_type=MULTIPLE. Для TEXT и SINGLE передаётся строка.
           
### Просмотр результатов опроса
**GET /api/v1/surveys/<uuid:id опроса>**
   
### Получение информации об участнике и пройденных им опросах
**GET /api/v1/participants/<int:id участника>**
     